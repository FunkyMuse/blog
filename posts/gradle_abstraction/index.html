<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Gradle peace in multi module projects" /><meta name="author" content="FunkyMuse" /><meta property="og:locale" content="en_US" /><meta name="description" content="Blog containing Kotlin and Android goodies." /><meta property="og:description" content="Blog containing Kotlin and Android goodies." /><link rel="canonical" href="https://funkymuse.github.io/posts/gradle_abstraction/" /><meta property="og:url" content="https://funkymuse.github.io/posts/gradle_abstraction/" /><meta property="og:site_name" content="FunkyMuse" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-07-04T20:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Gradle peace in multi module projects" /><meta name="twitter:site" content="@funky_muse" /><meta name="twitter:creator" content="@FunkyMuse" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"FunkyMuse"},"description":"Blog containing Kotlin and Android goodies.","url":"https://funkymuse.github.io/posts/gradle_abstraction/","@type":"BlogPosting","headline":"Gradle peace in multi module projects","dateModified":"2021-07-04T20:00:00+02:00","datePublished":"2021-07-04T20:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://funkymuse.github.io/posts/gradle_abstraction/"},"@context":"https://schema.org"}</script><title>Gradle peace in multi module projects | FunkyMuse</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">FunkyMuse</a></div><div class="site-subtitle font-italic">Anything which inspires everything</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/apps/" class="nav-link"> <i class="fa-fw fas fa-mobile ml-xl-3 mr-xl-3 unloaded"></i> <span>APPLICATIONS</span> </a><li class="nav-item"> <a href="/hire_me/" class="nav-link"> <i class="fa-fw fas fa-code ml-xl-3 mr-xl-3 unloaded"></i> <span>HIRE ME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/FunkyMuse" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/funky_muse" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['funkymuse','protonmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Gradle peace in multi module projects</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Gradle peace in multi module projects</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> FunkyMuse </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Jul 4, 2021, 8:00 PM +0200" prep="on" > Jul 4 <i class="unloaded">2021-07-04T20:00:00+02:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="693 words">3 min</span></div></div><div class="post-content"><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/gradle_abstraction/gradle_sad_reality.jpg" class="center" /></p><h2 id="complications">Complications</h2><hr /><p>Hello fellow Gradle user, you’ve probably copy pasted the configuration in every module you’ve had, no worries, today you’ll forget copy pasting most of the code in the gradle configuration.</p><p>Gradle is slow we get that, but building multi modules helps that, since gradle rebuilds only the modules affected of changes.</p><p>One day you woke up and chose violence, copy pasting the same config over and over again in every <code class="language-plaintext highlighter-rouge">build.gradle</code> file you had for every new module you created.</p><p>You decided to create a new module (hope this post doesn’t hurt your ego)</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/gradle_abstraction/1.png" class="center" /></p><p>then another module <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/gradle_abstraction/2.png" class="center" /></p><p>and you had to duplicate this in every gradle file, you hated your life because <em>Gradle</em> doesn’t simplify this out of the box, but don’t worry, we all hate <em>Gradle</em> because it’s complicated for no reason and a build system shouldn’t be, but hey, maybe <em>Bazel</em> will get more attention in the future.</p><h2 id="solution">Solution</h2><hr /><p>One day I woke up mad (it was a Tuesday, doing a code review to myself, hope i’m not the only one doing this to himself) and decided to live up to my motto, “a good programmer doesn’t write the same code twice”, in this case I didn’t want to write the same Gradle config twice, so I chose to fight.</p><p>Then in my project <code class="language-plaintext highlighter-rouge">build.gradle</code> I chose <em>peace</em></p><div class="language-groovy highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre><span class="n">subprojects</span> <span class="o">{</span>

    <span class="k">switch</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">case</span> <span class="s2">"app"</span><span class="o">:</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'com.android.application'</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'kotlin-android'</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'kotlin-kapt'</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'kotlin-parcelize'</span>
            <span class="n">dependencies</span> <span class="o">{</span>
                <span class="n">implementation</span> <span class="nf">fileTree</span><span class="o">(</span><span class="nl">dir:</span> <span class="s1">'libs'</span><span class="o">,</span> <span class="nl">include:</span> <span class="o">[</span><span class="s1">'*.jar'</span><span class="o">])</span>
            <span class="o">}</span>
            <span class="n">applyAndroid</span><span class="o">(</span><span class="n">it</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
            <span class="k">break</span>

        <span class="c1">//setup gradle for Kotlin libs</span>
        <span class="k">case</span> <span class="o">[</span><span class="s2">"enums"</span><span class="o">,</span> <span class="s2">"regex"</span><span class="o">]:</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'java-library'</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'kotlin'</span>
            <span class="n">applyKotlinModule</span><span class="o">(</span><span class="n">it</span><span class="o">)</span>
            <span class="k">break</span>

        <span class="nl">default:</span>
            <span class="c1">//setup gradle for libraries</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'com.android.library'</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'kotlin-android'</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'com.github.dcendents.android-maven'</span>
            <span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">'kotlin-parcelize'</span>
            <span class="n">applyAndroid</span><span class="o">(</span><span class="n">it</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>

            <span class="n">dependencies</span> <span class="o">{</span>
                <span class="n">implementation</span> <span class="nf">fileTree</span><span class="o">(</span><span class="nl">dir:</span> <span class="s1">'libs'</span><span class="o">,</span> <span class="nl">include:</span> <span class="o">[</span><span class="s1">'*.jar'</span><span class="o">])</span>
                <span class="c1">// Dependencies for local unit tests</span>
                <span class="n">testImplementation</span> <span class="s2">"junit:junit:$junitVersion"</span>
                <span class="n">testImplementation</span> <span class="s2">"org.hamcrest:hamcrest-all:$hamcrestVersion"</span>
                <span class="n">testImplementation</span> <span class="s2">"androidx.test.ext:junit-ktx:$androidXTestExtKotlinRunnerVersion"</span>
                <span class="n">testImplementation</span> <span class="s2">"androidx.test:core-ktx:$androidXTestCoreVersion"</span>
                <span class="n">testImplementation</span> <span class="s2">"org.robolectric:robolectric:$robolectricVersion"</span>
                <span class="n">testImplementation</span> <span class="s2">"androidx.arch.core:core-testing:$archTestingVersion"</span>
                <span class="n">testImplementation</span> <span class="s2">"org.jetbrains.kotlinx:kotlinx-coroutines-test:$coroutines"</span>

                <span class="c1">// AndroidX Test - Instrumented testing</span>
                <span class="n">androidTestImplementation</span> <span class="s2">"androidx.test.ext:junit:$androidXTestExtKotlinRunnerVersion"</span>
                <span class="n">androidTestImplementation</span> <span class="s2">"androidx.test.espresso:espresso-core:$espressoVersion"</span>
            <span class="o">}</span>

            <span class="k">break</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><div class="language-groovy highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kt">def</span> <span class="nf">applyKotlinModule</span><span class="o">(</span><span class="n">project</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">project</span><span class="o">.</span><span class="na">java</span> <span class="o">{</span>
        <span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="n">JavaVersion</span><span class="o">.</span><span class="na">VERSION_1_8</span>
        <span class="n">targetCompatibility</span> <span class="o">=</span> <span class="n">JavaVersion</span><span class="o">.</span><span class="na">VERSION_1_8</span>
    <span class="o">}</span>
    <span class="n">project</span><span class="o">.</span><span class="na">dependencies</span> <span class="o">{</span>
        <span class="n">implementation</span> <span class="s2">"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-groovy highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="kt">def</span> <span class="nf">applyAndroid</span><span class="o">(</span><span class="n">project</span><span class="o">,</span> <span class="n">buildConfigCase</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">project</span><span class="o">.</span><span class="na">android</span> <span class="o">{</span>
        <span class="n">compileSdkVersion</span> <span class="n">compileVersion</span>

        <span class="n">defaultConfig</span> <span class="o">{</span>
            <span class="n">minSdkVersion</span> <span class="n">minVersion</span>
            <span class="n">targetSdkVersion</span> <span class="n">compileVersion</span>
            <span class="n">versionCode</span> <span class="n">verCode</span>
            <span class="n">versionName</span> <span class="n">verName</span>
            <span class="n">testInstrumentationRunner</span> <span class="n">testRunner</span>
        <span class="o">}</span>

        <span class="n">compileOptions</span> <span class="o">{</span>
            <span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>
            <span class="n">targetCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>
        <span class="o">}</span>

        <span class="n">kotlinOptions</span> <span class="o">{</span>
            <span class="n">jvmTarget</span> <span class="o">=</span> <span class="s2">"1.8"</span>
        <span class="o">}</span>

        <span class="n">testOptions</span><span class="o">.</span><span class="na">unitTests</span> <span class="o">{</span>
            <span class="n">includeAndroidResources</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="o">}</span>

        <span class="n">buildFeatures</span> <span class="o">{</span>
            <span class="n">aidl</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="n">renderScript</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="n">resValues</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="n">shaders</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="n">buildConfig</span> <span class="o">=</span> <span class="n">buildConfigCase</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p>What I did was check for every subproject’s name and create the configuration for that, if it’s the <code class="language-plaintext highlighter-rouge">:app</code> then there can only be one and everything else was a library, either a Kotlin or Android based one.</p><p>You can check this approach in my open source <a href="https://github.com/FunkyMuse/KAHelpers/blob/master/build.gradle">project</a>.</p><h3 id="feature-modules-feature-folders">Feature modules (feature folders)</h3><p>One day you wanted to call a function and have the proper dependencies included?</p><div class="language-groovy highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">applyComposeUIDeps</span><span class="o">(</span><span class="n">project</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">project</span><span class="o">.</span><span class="na">dependencies</span> <span class="o">{</span>
        <span class="n">implementation</span> <span class="s2">"androidx.compose.ui:ui:$compose_version"</span>
        <span class="n">implementation</span> <span class="s2">"androidx.compose.ui:ui-tooling:$compose_version"</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>I gotchu <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/gradle_abstraction/3.png" class="center" /></p><h3 id="drawbacks">Drawbacks</h3><p>When it comes to feature folders you need to exempt them when you’re using this approach, since you’re basing this approach on names of the modules every name has to be unique, that’s the drawback, sometimes you may end up with longer names.</p><h3 id="end-result">End result</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/gradle_abstraction/4.png" class="center" /></p><p>some of your feature <code class="language-plaintext highlighter-rouge">build.gradle</code> modules will look really short</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/gradle_abstraction/5.png" class="center" /></p><p>You can check this approach in my other open source <a href="https://github.com/FunkyMuse/Aurora/blob/main/build.gradle">project</a>.</p><p>You can go forward and do many more of these abstractions and forget about copy pasting gradle config once and for all.</p><h2 id="goodbye">Goodbye</h2><p>Don’t forget to drink water, it’s summer and it’s hot.</p><p>Thanks for reading, stay cool and also cool.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/gradle_abstraction/goodbye.jpg" class="center" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/gradle/'>Gradle</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/gradle/" class="post-tag no-text-decoration" >Gradle</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Gradle peace in multi module projects - FunkyMuse&url=https://funkymuse.github.io/posts/gradle_abstraction/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Gradle peace in multi module projects - FunkyMuse&u=https://funkymuse.github.io/posts/gradle_abstraction/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Gradle peace in multi module projects - FunkyMuse&url=https://funkymuse.github.io/posts/gradle_abstraction/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://funkymuse.github.io/posts/gradle_abstraction/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://www.reddit.com/submit?url=https://funkymuse.github.io/posts/gradle_abstraction/&title=Gradle peace in multi module projects - FunkyMuse" data-toggle="tooltip" data-placement="top" title="Reddit" target="_blank" rel="noopener" aria-label="Reddit"> <i class="fa-fw fab fa-reddit"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/kotlin/">Kotlin</a> <a class="post-tag" href="/tags/dagger/">Dagger</a> <a class="post-tag" href="/tags/hilt/">Hilt</a> <a class="post-tag" href="/tags/gradle/">Gradle</a> <a class="post-tag" href="/tags/architecture-components/">Architecture Components</a> <a class="post-tag" href="/tags/compose/">Compose</a> <a class="post-tag" href="/tags/jetpack/">Jetpack</a> <a class="post-tag" href="/tags/optimizations/">Optimizations</a> <a class="post-tag" href="/tags/programming/">Programming</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/optimize-build-gradle-speed/"><div class="card-body"> <span class="timeago small" > Jul 7, 2020 <i class="unloaded">2020-07-07T21:55:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Optimize the build speed for your Android project</h3><div class="text-muted small"><p> We’ve all came to a decision to go and do something else while waiting for the build.gradle to finish, something like: people get married or divorced, learn to fly a plane, build a rocket ship ou...</p></div></div></a></div><div class="card"> <a href="/posts/software_engineering_2021/"><div class="card-body"> <span class="timeago small" > Sep 1 <i class="unloaded">2021-09-01T01:10:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Modern software engineering or just a gardener's job!?</h3><div class="text-muted small"><p> You might be wondering, why the title seems like a click-bait, but matter of fact, you’re caught in it just as you were when looking for your next gig, big promises and lot to learn… excitement… ...</p></div></div></a></div><div class="card"> <a href="/posts/android_anti_tampering/"><div class="card-body"> <span class="timeago small" > Jul 11 <i class="unloaded">2021-07-11T16:30:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How long will you go to protect your Android app from being tampered?</h3><div class="text-muted small"><p> The big problem Security of your app matters, whether you’re an indie developer trying to place a product and make a living out of your application, a big bank, a giant dating app or just an en...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/compose_hilt_mm/" class="btn btn-outline-primary" prompt="Older"><p>Navigation in multi module Android Compose UI project + Hilt</p></a> <a href="/posts/arch_components_donts/" class="btn btn-outline-primary" prompt="Newer"><p>Common mistakes when using Architecture Components</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/funky_muse">FunkyMuse</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."> Some rights reserved. </span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/kotlin/">Kotlin</a> <a class="post-tag" href="/tags/dagger/">Dagger</a> <a class="post-tag" href="/tags/hilt/">Hilt</a> <a class="post-tag" href="/tags/gradle/">Gradle</a> <a class="post-tag" href="/tags/architecture-components/">Architecture Components</a> <a class="post-tag" href="/tags/compose/">Compose</a> <a class="post-tag" href="/tags/jetpack/">Jetpack</a> <a class="post-tag" href="/tags/optimizations/">Optimizations</a> <a class="post-tag" href="/tags/programming/">Programming</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://funkymuse.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
